--- kdebase-030317/kcontrol/background/bgdialog.cpp~	Mon Mar 10 00:42:45 2003
+++ kdebase-030317/kcontrol/background/bgdialog.cpp	Tue Mar 18 19:06:34 2003
@@ -238,6 +238,36 @@
    emit changed(true);
 }
 
+void BGDialog::kdmdefaults()
+{
+   m_pGlobals->setCommonBackground(_defCommon);
+   m_pGlobals->setLimitCache(_defLimitCache);
+   m_pGlobals->setCacheSize(_defCacheSize);
+
+   m_eDesk = _defCommon ? 0 : m_Desk;
+
+   KBackgroundRenderer *r = m_Renderer[m_eDesk];
+
+   if (r->isActive())
+      r->stop();
+
+   r->setBackgroundMode(KBackgroundSettings::Flat);
+   r->setColorA(QColor("#0000C8"));
+   r->setColorB(_defColorB);
+   r->setWallpaper("pldwallpaper.png");
+   r->setWallpaperMode(KBackgroundSettings::Scaled);
+   r->setMultiWallpaperMode(_defMultiMode);
+   m_slideShowRandom = _defMultiMode;
+   r->setBlendMode(_defBlendMode);
+   r->setBlendBalance(_defBlendBalance);
+   r->setReverseBlending(_defReverseBlending);
+
+   updateUI();
+
+   m_copyAllDesktops = true;
+   emit changed(true);
+}
+
 QString BGDialog::quickHelp() const
 {
    return i18n("<h1>Background</h1> This module allows you to control the"
--- kdebase-030317/kcontrol/background/bgdialog.h~	Thu Feb  6 00:35:39 2003
+++ kdebase-030317/kcontrol/background/bgdialog.h	Tue Mar 18 18:12:35 2003
@@ -41,6 +41,7 @@
    void load();
    void save();
    void defaults();
+   void kdmdefaults();
 
    void makeReadOnly();
                
--- kdebase-030317/kcontrol/background/main.cpp~	Sat Jan 25 00:35:46 2003
+++ kdebase-030317/kcontrol/background/main.cpp	Tue Mar 18 18:13:25 2003
@@ -100,6 +100,11 @@
     m_base->defaults();
 }
 
+void KBackground::kdmdefaults()
+{
+    m_base->kdmdefaults();
+}
+
 void KBackground::slotChildChanged(bool different)
 {
    emit changed(different);
--- kdebase-030317/kcontrol/background/main.h~	Sat Jan 25 00:35:46 2003
+++ kdebase-030317/kcontrol/background/main.h	Tue Mar 18 18:00:49 2003
@@ -31,6 +31,7 @@
     virtual void load();
     virtual void save();
     virtual void defaults();
+    virtual void kdmdefaults();
 
     QString quickHelp() const;
     const KAboutData* aboutData() const;
