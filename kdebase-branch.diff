Index: kdepasswd/kcm/kcm_useraccount.desktop
===================================================================
--- kdepasswd/kcm/kcm_useraccount.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kdepasswd/kcm/kcm_useraccount.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -101,7 +101,7 @@
 Keywords[he]=ססמאות, דוא"ל, שם, ארגון, שם אמתי,תמונת כניסה, מצב echo, password,email,name,organization,realname,login image,face,echo mode
 Keywords[hr]=password,email,name,organization,realname,login image,face,echo mode,lozinka,e-pošta,naziv,ime,organizacija,pravo ime,slika prijave,lice,odzivnik
 Keywords[hu]=jelszó,e-mail,név,szervezet,valódi név,bejelentkezési kép,arc,kiírási mód
-Keywords[it]=password,email,nome,organizzazione,nome vero,immagine login,icona login,faccia,modo echo
+Keywords[it]=password,email,nome,organizzazione,nome vero,immagine login,icona login,immagine accesso,faccia,modo echo
 Keywords[ja]=パスワード;Eメール;名前;組織;本名;ログイン画像;顔;エコーモード
 Keywords[km]=ពាក្យ​សម្ងាត់; អ៊ីមែល; ឈ្មោះ; អង្គការ; ឈ្មោះ​ពិត; រូបភាព​ពេល​ចូល; មុខ; របៀបបង្ហាញ
 Keywords[lt]=password,email,name,organization,realname,login image,face,echo mode,slaptažodis,e. paštas,el.paštas,vardas,organizacija,tikrasis vardas,veidas
Index: kcontrol/ebrowsing/plugins/ikws/searchproviders/fsd.desktop
===================================================================
--- kcontrol/ebrowsing/plugins/ikws/searchproviders/fsd.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kcontrol/ebrowsing/plugins/ikws/searchproviders/fsd.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -24,7 +24,7 @@
 Name[hi]=एफएसएफ/यूनेस्को फ्री सॉफ़्टवेयर डिरेक्ट्री
 Name[hr]=FSF/UNESCO mapa slobodnog softvera
 Name[hu]=FSF/UNESCO szabadszoftver-gyűjtemény
-Name[it]=Elenco software liberp FSF/UNESCO
+Name[it]=Elenco software libero FSF/UNESCO
 Name[ja]=FSF/UNESCO フリーソフトウェア ディレクトリ
 Name[kk]=FSF/UNESCO ашық бағдарламалық жасау каталогы
 Name[km]=ថត​កម្មវិធី​ឥត​គិត​ថ្លៃ​របស់ FSF/UNESCO
@@ -60,6 +60,7 @@
 Name[zh_TW]=FSF/UNESCO 自由軟體目錄
 ServiceTypes=SearchProvider
 Keys=fsd
-Query=http://directory.fsf.org/search/fsd-search.py?q=\\{@}
+Query=http://directory.fsf.org/search/?query=\\{@}
+Query[nds]=http://directory.fsf.org/search/fsd-search.py?q=\\{@}
 
 
Index: kcontrol/kio/kcookiesmanagement.cpp
===================================================================
--- kcontrol/kio/kcookiesmanagement.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kcontrol/kio/kcookiesmanagement.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -149,7 +149,7 @@
     {
       QString caption = i18n ("DCOP Communication Error");
       QString message = i18n ("Unable to delete all the cookies as requested.");
-      KMessageBox::sorry (this, caption, message);
+      KMessageBox::sorry (this, message,caption);
       return;
     }
     m_bDeleteAll = false; // deleted[Cookies|Domains] have been cleared yet    
@@ -169,7 +169,7 @@
     {
       QString caption = i18n ("DCOP Communication Error");
       QString message = i18n ("Unable to delete cookies as requested.");
-      KMessageBox::sorry (this, caption, message);
+      KMessageBox::sorry (this, message,caption);
       return;
     }
 
@@ -250,7 +250,7 @@
     QString caption = i18n ("Information Lookup Failure");
     QString message = i18n ("Unable to retrieve information about the "
                             "cookies stored on your computer.");
-    KMessageBox::sorry (this, caption, message);
+    KMessageBox::sorry (this, message, caption);
     return;
   }
 
Index: kicker/extensions/taskbar/taskbarextension.desktop
===================================================================
--- kicker/extensions/taskbar/taskbarextension.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kicker/extensions/taskbar/taskbarextension.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -54,7 +54,7 @@
 Name[pt]=Barra de Tarefas Externa
 Name[pt_BR]=Barra de Tarefas Externa
 Name[ro]=Bară de procese externă
-Name[ru]=Расширенная панель задач
+Name[ru]=Внешняя панель задач
 Name[rw]=Umurongoibikorwa w'Inyuma
 Name[se]=Olgguldas bargoholga
 Name[sk]=Externý taskbar
@@ -119,7 +119,7 @@
 Comment[pt]=Extensão do painel de barra de tarefas externa
 Comment[pt_BR]=Extensão do painel para a barra de tarefas externa
 Comment[ro]=Extensie pentru bară de procese externă
-Comment[ru]=Расширение панели задач KDE
+Comment[ru]=Внешняя панель задач KDE
 Comment[se]=Olgguldas bargoholga viiddádus
 Comment[sk]=Rozšírenie externého panelu úloh
 Comment[sl]=Zunanja razširitev opravilne vrstice
Index: kioslave/media/mediamanager/halbackend.cpp
===================================================================
--- kioslave/media/mediamanager/halbackend.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kioslave/media/mediamanager/halbackend.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -849,6 +849,13 @@
         result << tmp;
     }
 
+	if ( valids.contains("locale") )
+	{
+		value = config.readBoolEntry( "locale", true );
+		tmp = QString( "locale=%1" ).arg( value ? "true" : "false" );
+		result << tmp;
+	}
+
     if (valids.contains("utf8"))
     {
         value = config.readBoolEntry("utf8", true);
@@ -922,7 +929,7 @@
 
     QMap<QString,QString> valids = MediaManagerUtils::splitOptions(options);
 
-    const char *names[] = { "ro", "quiet", "atime", "uid", "utf8", "flush", "sync", 0 };
+    const char *names[] = { "ro", "quiet", "atime", "uid", "utf8", "flush", "sync", "locale", 0 };
     for (int index = 0; names[index]; ++index)
         if (valids.contains(names[index]))
             config.writeEntry(names[index], valids[names[index]] == "true");
@@ -942,6 +949,10 @@
         config.writeEntry("automount", valids["automount"]);
     }
 
+	if (valids.contains("locale") ) {
+		config.writeEntry("locale", valids["locale"]);
+	}
+
     return true;
 }
 
@@ -1140,6 +1151,11 @@
         soptions << QString("uid=%1").arg(getuid());
     }
 
+    if (valids["locale"] == "true")
+	{
+		soptions << QString("locale=%1").arg( KGlobal::locale()->language() ); 
+	}
+
     if (valids["ro"] == "true")
         soptions << "ro";
 
Index: Makefile.am.in
===================================================================
--- Makefile.am.in	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ Makefile.am.in	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -9,7 +9,7 @@
 
 AUTOMAKE_OPTIONS = foreign 1.6.1
 
-bin_SCRIPTS = startkde
+bin_SCRIPTS = startkde kde3
 
 EXTRA_DIST = admin bsd-port debian kdebase.spec.in README.pam kde.pamd kscreensaver.pamd mkpamserv
 
Index: startkde
===================================================================
--- startkde	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ startkde	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -387,6 +387,8 @@
 kdeinit_shutdown
 dcopserver_shutdown --wait
 artsshell -q terminate
+# KDE4 support
+kde4 kdeinit4_shutdown 2>/dev/null
 
 echo 'startkde: Running shutdown scripts...'  1>&2
 
Index: konqueror/konquerorsu.desktop
===================================================================
--- konqueror/konquerorsu.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ konqueror/konquerorsu.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -60,7 +60,7 @@
 Name[pt]=Gestor de Ficheiros - Modo de Super Utilizador
 Name[pt_BR]=Gerenciador de Arquivos (Modo Super-Usuário)
 Name[ro]=Manager de fișiere - mod superutilizator
-Name[ru]=Менеджер файлов (с root-привилегиями)
+Name[ru]=Менеджер файлов (в режиме администратора)
 Name[rw]=Mucungadosiye - Uburyo Ukoresha Mukuru
 Name[se]=Fiilagieđahalli – Supergeavaheaddjemodus
 Name[sk]=Správca súborov - Super-používateľský mód
Index: kde3
===================================================================
--- kde3	(.../tags/KDE/3.5.9/kdebase)	(wersja 0)
+++ kde3	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -0,0 +1,9 @@
+#!/bin/sh
+#
+#  Script for launching KDE3 applications from outside of the KDE3 desktop
+#
+#  Modify this to match your specific needs, such as setting up needed env. variables,
+#  and make sure this script is in $PATH (e.g. make a symlink if necessary).
+#
+
+exec "$@"
Index: khotkeys/data/konqueror_gestures_kde321.khotkeys
===================================================================
--- khotkeys/data/konqueror_gestures_kde321.khotkeys	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ khotkeys/data/konqueror_gestures_kde321.khotkeys	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -244,6 +244,7 @@
 Comment[eo]=Opera-stilo: Premu, iru supren, malpremu.\nNOTU: Malakordas kun "Nova Langeto", tial estas malebligita defaŭlte.
 Comment[es]=Estilo Opera: Pulsar, subir, soltar.\nNOTA: Entra en conflicto con «Nueva solapa», por lo que está deshabilitado por omisión.
 Comment[et]=Opera stiilis: vajuta, liiguta üles, vabasta.\nMärkus: konfliktis toiminguga 'Uus kaart' ja seetõttu vaikimisi välja lülitatud.
+Comment[fr]=Comme Opera : Appuyez, déplacez en haut, relâchez.\nRemarque : Entre en conflit avec le mouvement de nouvel onglet, il est donc désactivé par défaut.
 Comment[fy]=Opera-styl: yndrukke, nei omheech, loslitte.\nTink derom: Konflikten mei 'Nije ljepper', en sa binne standert útskeakele.
 Comment[hr]=U stilu Opere: Pritisni, pomakni prema gore, otpusti.\nNAPOMENA: U sukobu s gestikulacijom "Nova kartica" te je iz tog razloga onemogućeno zadanim postavkama.
 Comment[hu]=Opera-stílus: lenyomás, fel, elengedés.\nMEGJEGYZÉS: Ütközik az 'Új lap' paranccsal, ezért alapértelmezésben le van tiltva.
@@ -370,6 +371,7 @@
 Comment[eo]=Irante supren en URL/dosieruja strukturo.\nMozila-stilo: Premu, iru supren, iru maldekstren, iru supren, malpremu.
 Comment[es]=Subir en la estructura  de URL/directorios.\nEstilo Mozilla: Pulsar, subir, mover a la izquierda, subir, soltar.
 Comment[et]=Liikumine URL-i/kataloogistruktuuris üles.\nMozilla stiilis: vajuta, liiguta üles, liiguta vasakule, liiguta üles, vabasta.
+Comment[fr]=Remonter d'un cran dans l'URL ou les dossiers.\nComme Mozilla : Appuyez, déplacez en haut, à gauche, en haut, relâchez.
 Comment[fy]=Omheech gean yn adres-/triemtafelstruktuer.\nMozilla-styl: Yndrukke, nei omheech, nei lofts, nei omheech, loslitte. 
 Comment[hr]=Kretanje razinu prema gore u strukturi URL adrese ili mape.\nU stilu Mozille: Pritisni, pomakni prema gore, pomakni ulijevo, otpusti.
 Comment[hu]=Felfelé lép a könyvtárstruktúrában (vagy az URL-ben).\nMozilla-stílus: lenyomás, fel, balra, fel, elengedés.
@@ -496,6 +498,7 @@
 Comment[eo]=Irante supren en URL/dosieruja strukturo.\nOpera-stilo: Premu, iru supren, iru maldekstren, iru supren, malpremu.\nNOTU: Malakordas kun "Aktivigi Antaŭan Langeton", tial estas malebligita defaŭlte.
 Comment[es]=Subir en la estructura de URL/directorios.\nEstilo Opera: Pulsar, subir, mover a la izquierda, subir, soltar.\nNOTA: Entra en conflicto con «Activar la solapa anterior», por lo que está deshabilitado por omisión.
 Comment[et]=Liikumine URL-i/kataloogistruktuuris üles.\nOpera stiilis: vajuta, liiguta üles, liiguta vasakule, liiguta üles, vabasta.\nMärkus: konfliktis toiminguga "Eelmise kaardi aktiveerimine" ja seetõttu vaikimisi välja lülitatud.
+Comment[fr]=Remonter d'un cran dans l'URL ou les dossiers.\nComme Opera : Appuyez, déplacez en haut, à gauche, en haut, relâchez.\nRemarque : Identique au mouvement d'activation de l'onglet précédent, il est donc désactivé par défaut.
 Comment[fy]=Omheech gean yn adres-/triemtafelstruktuer.\nOpera-styl: Yndrukke, nei omheech, nei lofts, nei omheech, loslitte. \nTink derom: Konflikten mei "Foarige ljepper aktivearje", en sa is standert útskeakele.
 Comment[hr]=Kretanje razinu prema gore u strukturi URL adrese ili mape.\nU stilu Opere: Pritisni, pomakni prema gore, pomakni ulijevo, pomakni prema gore, otpusti.\nNAPOMENA: U sukobu s gestikulacijom "Aktiviraj prethodnu karticu" te je iz tog razloga onemogućeno zadanim postavkama.
 Comment[hu]=Felfelé lép a könyvtárstruktúrában (vagy az URL-ben).\nOpera-stílus: lenyomás, fel, balra, fel, elengedés.\nMEGJEGYZÉS: Ütközik az "Előző lap" paranccsal, ezért alapértelmezésben le van tiltva.
@@ -1302,11 +1305,12 @@
 Comment[eo]=Premu, iru malsupren, iru duone supren, iru dekstren, iru malsupren, malpremu.\n(Skizante minusklan "h".)
 Comment[es]=Pulsar, bajar, subir hasta la mitad, mover a la derecha, bajar, soltar.\n(Dibujando una «h» minúscula.)
 Comment[et]=Vajuta, liiguta alla, liiguta pool teed üles, liiguta paremale, liiguta alla, vabasta.\n(Väikese h-tähe joonistamine.)
+Comment[fr]=Appuyez, déplacez en bas, à moitié en haut, à droite, puis en bas, relâchez.\n (Dessinez un « h » minuscule).
 Comment[fy]=Yndrukke, nei omleech, heal nei omheech, nei rjochts, nei omleech, loslitte.\n(Tekenje in lytse letter 'h'.)
 Comment[hr]=Pritisni, pomakni prema dolje, pomakni prema gore za pola, pomakni udesno, pomakni prema dolje, otpusti.\n(Crtanje malog slova "h".)
 Comment[hu]=Lenyomás, le, kicsit fel, jobbra, le, elengedés.\n(Kis 'h' betű.)
 Comment[is]=Ýta, færa niður, færa að hálfu upp, færa til hægri, færa niður, sleppa.\n(Teiknar lítið 'h'.)
-Comment[it]=Premin sposta in giù, sposta in su a metà, sposta a destra, sposta in giù, rilascia.\n(Disegna un'"h" minuscola.)
+Comment[it]=Premi, sposta in giù, sposta in su a metà, sposta a destra, sposta in giù, rilascia.\n(Disegna un'"h" minuscola.)
 Comment[ja]=マウスの中ボタンを押したまま、マウスを下に動かし、次に半分の距離だけ上に動かし、さらに右->下の順に動かし、ボタンを放します。\n(小文字の 'h' を描くように)
 Comment[km]=ចុច ផ្លាស់ទី​ចុះក្រោម ផ្លាស់ទី​ពាក់កណ្ដាល​ឡើងលើ ផ្លាស់ទី​ទៅ​ស្ដាំ ផ្លាស់ទីចុះក្រោម លែង\n(គូរ​អក្សរអក្សរ 'h' ។)
 Comment[ko]=누르고, 아래로 이동하고, 위로 이동하고, 아래로 이동하고, 놓기.
@@ -1469,6 +1473,7 @@
 Comment[eo]=Premu, iru dekstren, iru malsupren, iru dekstren, malpremu.\nMozila stilo: Premu, iru malsupren, iru dekstren, malpremu.
 Comment[es]=Pulsar, mover a la derecha, bajar, mover a la derecha, soltar.\nEstilo Mozilla: Pulsar, bajar, mover a la derecha, soltar.
 Comment[et]=Vajuta, liiguta paremale, liiguta alla, liiguta paremale, vabasta.\nMozilla stiilis: vajuta, liiguta alla, liiguta paremale, vabasta.
+Comment[fr]=Appuyez, déplacez à droite, en bas, à droite, relâchez.\nComme Mozilla : Appuyez, déplacez en bas, à droite, relâchez.
 Comment[fy]=Yndrukke, nei rjochts, nei omleech, nei rjochts, loslitte.\nMozilla-styl: Yndrukke, nei omleech, nei rjochts, loslitte.
 Comment[hr]=Pritisni, pomakni udesno, pomakni prema dolje, pomakni udesno, otpusti.\nU stilu Mozille: Pritisni, pomakni prema dolje, pomakni udesno, otpusti.
 Comment[hu]=Lenyomás, jobbra, le, jobbra, elengedés.\nMozilla-stílus: Lenyomás, le, jobbra, elengedés.
@@ -1595,6 +1600,7 @@
 Comment[eo]=Premu, iru supren, malpremu.\nMalakordas kun la Opera stilo "Supren #2", kiu estas malebligita defaŭlte.
 Comment[es]=Pulsar, subir, soltar.\nEntra en conflicto con el «Subir #2» de Opera, por lo que está deshabilitado por omisión.
 Comment[et]=Vajuta, liiguta üles, vabasta.\nKonfliktis Opera stiilis 'Üles nr. 2', mis on vaikimisi välja lülitatud.
+Comment[fr]=Appuyez, déplacez en haut, relâchez.\nConflit avec le « Haut #2 » d'Opera, il est donc désactivé par défaut.
 Comment[fy]=Yndrukke, nei omheech, loslitte.\nKonflikt mei Opera-styl 'nei omheech #2', hokker standert útskeakele is.
 Comment[hr]=Pritisni, pomakni prema gore, otpusti.\nU sukobu s Operinim "Gore br.2", koji je onemogućen po zadanim postavkama.
 Comment[hu]=Lenyomás, fel, elengedés.\nÜtközik az Opera-stílusú 'Fel (2)' paranccsal, amelyik alapértelmezésben le van tiltva.
Index: khotkeys/kcontrol/actions_listview_widget.cpp
===================================================================
--- khotkeys/kcontrol/actions_listview_widget.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ khotkeys/kcontrol/actions_listview_widget.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -110,6 +110,7 @@
 //    if( nw == NULL )
 //        nw = current_action()->itemBelow();
     delete saved_current_item;
+    saved_current_item = NULL;
     recent_item = NULL;
 //    if( nw != NULL )
 //        {
Index: khotkeys/kcontrol/action_list_widget.cpp
===================================================================
--- khotkeys/kcontrol/action_list_widget.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ khotkeys/kcontrol/action_list_widget.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -148,6 +148,8 @@
 
 void Action_list_widget::copy_pressed()
     {
+        if ( !selected_item )
+            return;
     actions_listview->setSelected( create_listview_item( selected_item->action(),
         selected_item->parent() ? NULL : actions_listview, selected_item->parent(),
         selected_item, true ), true );
@@ -156,11 +158,14 @@
 void Action_list_widget::delete_pressed()
     {
     delete selected_item; // CHECKME snad vyvola signaly pro enable()
+    selected_item = NULL;
     }
 
 void Action_list_widget::modify_pressed()
     {
-    edit_listview_item( selected_item );
+        if ( !selected_item )
+            return;
+        edit_listview_item( selected_item );
     }
 
 void Action_list_widget::current_changed( QListViewItem* item_P )
Index: khotkeys/kcontrol/triggers_tab.cpp
===================================================================
--- khotkeys/kcontrol/triggers_tab.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ khotkeys/kcontrol/triggers_tab.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -151,19 +151,23 @@
 
 void Triggers_tab::copy_pressed()
     {
-    triggers_listview->setSelected( create_listview_item( selected_item->trigger(),
-        triggers_listview, selected_item, true ), true );
+        if ( selected_item )
+        {
+            triggers_listview->setSelected( create_listview_item( selected_item->trigger(),triggers_listview, selected_item, true ), true );
+        }
     }
 
 void Triggers_tab::delete_pressed()
     {
     delete selected_item; // CHECKME snad vyvola signaly pro enable()
+    selected_item = NULL;
     }
 
 void Triggers_tab::modify_pressed()
-    {
-    edit_listview_item( selected_item );
-    }
+{
+    if ( selected_item )
+        edit_listview_item( selected_item );
+}
 
 void Triggers_tab::current_changed( QListViewItem* item_P )
     {
Index: khotkeys/kcontrol/condition_list_widget.cpp
===================================================================
--- khotkeys/kcontrol/condition_list_widget.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ khotkeys/kcontrol/condition_list_widget.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -213,6 +213,8 @@
 
 void Condition_list_widget::copy_pressed()
     {
+        if ( !selected_item )
+            return;
     conditions_listview->setSelected( create_listview_item(
         selected_item->condition()->copy( selected_item->condition()->parent()),
         selected_item->parent() ? NULL : conditions_listview,
@@ -221,13 +223,19 @@
     }
 
 void Condition_list_widget::delete_pressed()
+{
+    if ( selected_item )
     {
-    conditions.remove( selected_item->condition()); // we own it
-    delete selected_item; // CHECKME snad vyvola signaly pro enable()
+        conditions.remove( selected_item->condition()); // we own it
+        delete selected_item; // CHECKME snad vyvola signaly pro enable()
+        selected_item = NULL;
     }
+}
 
 void Condition_list_widget::modify_pressed()
     {
+        if ( !selected_item )
+            return;
     edit_listview_item( selected_item );
     }
 
Index: kwin/options.cpp
===================================================================
--- kwin/options.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kwin/options.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -82,21 +82,12 @@
         focusStealingPreventionLevel = 0;
 
     KConfig *gc = new KConfig("kdeglobals", false, false);
-    bool isVirtual = KApplication::desktop()->isVirtualDesktop();
     gc->setGroup("Windows");
-    xineramaEnabled = gc->readBoolEntry ("XineramaEnabled", isVirtual ) &&
-                      isVirtual;
-    if (xineramaEnabled) 
-        {
-        xineramaPlacementEnabled = gc->readBoolEntry ("XineramaPlacementEnabled", true);
-        xineramaMovementEnabled = gc->readBoolEntry ("XineramaMovementEnabled", true);
-        xineramaMaximizeEnabled = gc->readBoolEntry ("XineramaMaximizeEnabled", true);
-        xineramaFullscreenEnabled = gc->readBoolEntry ("XineramaFullscreenEnabled", true);
-        }
-    else 
-        {
-        xineramaPlacementEnabled = xineramaMovementEnabled = xineramaMaximizeEnabled = xineramaFullscreenEnabled = false;
-        }
+    xineramaEnabled = gc->readBoolEntry ("XineramaEnabled", true );
+    xineramaPlacementEnabled = gc->readBoolEntry ("XineramaPlacementEnabled", true);
+    xineramaMovementEnabled = gc->readBoolEntry ("XineramaMovementEnabled", true);
+    xineramaMaximizeEnabled = gc->readBoolEntry ("XineramaMaximizeEnabled", true);
+    xineramaFullscreenEnabled = gc->readBoolEntry ("XineramaFullscreenEnabled", true);
     delete gc;
 
     placement = Placement::policyFromString( config->readEntry("Placement"), true );
Index: kwin/group.cpp
===================================================================
--- kwin/group.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kwin/group.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -747,9 +747,9 @@
                 if( (*it2)->hasTransient( *it1, false ) && (*it3)->hasTransient( *it1, false ))
                     {
                     if( (*it2)->hasTransient( *it3, true ))
+                        (*it2)->transients_list.remove( *it1 );
+                    if( (*it3)->hasTransient( *it2, true ))
                         (*it3)->transients_list.remove( *it1 );
-                    if( (*it3)->hasTransient( *it2, true ))
-                        (*it2)->transients_list.remove( *it1 );
                     }
                 }
             }
Index: kwin/main.cpp
===================================================================
--- kwin/main.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kwin/main.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -16,10 +16,12 @@
 
 #include <klocale.h>
 #include <kglobal.h>
+#include <kdebug.h>
 #include <stdlib.h>
 #include <kcmdlineargs.h>
 #include <kaboutdata.h>
 #include <dcopclient.h>
+#include <dcopref.h>
 #include <unistd.h>
 #include <signal.h>
 #include <fcntl.h>
@@ -115,12 +117,15 @@
 
     options = new Options;
     atoms = new Atoms;
-    
+
     // create workspace.
     (void) new Workspace( isSessionRestored() );
 
     syncX(); // trigger possible errors, there's still a chance to abort
 
+    DCOPRef ref( "kded", "kded" );
+    ref.send( "unloadModule", QCString( "kdetrayproxy" ));
+    
     initting = FALSE; // startup done, we are up and running now.
        
     dcopClient()->send( "ksplash", "", "upAndRunning(QString)", QString("wm started"));
@@ -138,7 +143,12 @@
     {
     delete Workspace::self();
     if( owner.ownerWindow() != None ) // if there was no --replace (no new WM)
+        {
         XSetInputFocus( qt_xdisplay(), PointerRoot, RevertToPointerRoot, qt_x_time );
+        DCOPRef ref( "kded", "kded" );
+        if( !ref.send( "loadModule", QCString( "kdetrayproxy" )))
+            kdWarning( 176 ) << "Loading of kdetrayproxy failed." << endl;
+        }
     delete options;
     }
 
@@ -147,6 +157,9 @@
     delete Workspace::self();
     // remove windowmanager privileges
     XSelectInput(qt_xdisplay(), qt_xrootwin(), PropertyChangeMask );
+    DCOPRef ref( "kded", "kded" );
+    if( !ref.send( "loadModule", QCString( "kdetrayproxy" )))
+        kdWarning( 176 ) << "Loading of kdetrayproxy failed." << endl;
     quit();
     }
 
Index: kwin/manage.cpp
===================================================================
--- kwin/manage.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kwin/manage.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -331,6 +331,22 @@
             if( (*it)->isShown( true ))
                 init_minimize = false; // SELI even e.g. for NET::Utility?
         }
+    // if a dialog is shown for minimized window, minimize it too
+    if( !init_minimize && isTransient() && mainClients().count() > 0 )
+        {
+        bool visible_parent = false;
+        ClientList mainclients = mainClients();
+        for( ClientList::ConstIterator it = mainclients.begin();
+             it != mainclients.end();
+             ++it )
+            if( (*it)->isShown( true ))
+                visible_parent = true;
+        if( !visible_parent )
+            {
+            init_minimize = true;
+            demandAttention();
+            }
+        }
 
     if( init_minimize )
         minimize( true ); // no animation
Index: kwin/workspace.cpp
===================================================================
--- kwin/workspace.cpp	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ kwin/workspace.cpp	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -1608,6 +1608,7 @@
             }
         }
     systemTrayWins.remove( w );
+    XRemoveFromSaveSet (qt_xdisplay (), w);
     propagateSystemTrayWins();
     return TRUE;
     }
Index: konsole/other/sumc.desktop
===================================================================
--- konsole/other/sumc.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ konsole/other/sumc.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -45,6 +45,7 @@
 Name[pt]=Midnight Commander como Root
 Name[pt_BR]=Midnight Commander - Root
 Name[ro]=Midnight Commander "root"
+Name[ru]=Midnight Commander c правами root
 Name[rw]=Mutangabwiriza Hagati-Ijoro y'Umuzi
 Name[se]=Midnight Commander root geavaheaddji várás
 Name[sl]=Midnight Commander za root
@@ -115,7 +116,7 @@
 Comment[pt]=Novo Midnight Commander como Root
 Comment[pt_BR]=Nova Janela do Midnight Commander- Root
 Comment[ro]=Consolă Midnight Commander "root" nouă
-Comment[ru]=Новое окно MC с правами root
+Comment[ru]=Новое окно Midnight Commander с правами root
 Comment[rw]=Mutangabwiriza Hagati-Ijoro y'Umuzi Nshya
 Comment[se]=Ođđa Midnight Commander root geavadeaddji várás
 Comment[sk]=Nový root Midnight Commander
Index: konsole/other/su.desktop
===================================================================
--- konsole/other/su.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ konsole/other/su.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -43,6 +43,7 @@
 Name[pt]=Linha de Comandos Root
 Name[pt_BR]=Shell do Root
 Name[ro]=Interpretor "root"
+Name[ru]=Консоль с правами root
 Name[rw]=Sheli Umuzi
 Name[se]=Ruohtasskálžu
 Name[sl]=Korenska lupina
@@ -103,7 +104,7 @@
 Comment[pt]=Nova Linha de Comandos Root
 Comment[pt_BR]=Novo Shell do Root
 Comment[ro]=Interpretor "roo" nou
-Comment[ru]=Новая оболочка с правами root
+Comment[ru]=Новая консоль с правами root
 Comment[rw]=Sheli Umuzi Nshya
 Comment[se]=Ođđa ruohtasskálžu
 Comment[sk]=Nový Root shell
Index: konsole/other/shell.desktop
===================================================================
--- konsole/other/shell.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ konsole/other/shell.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -44,6 +44,7 @@
 Name[pl]=Powłoka
 Name[pt]=Linha de Comandos
 Name[ro]=Interpretor
+Name[ru]=Консоль
 Name[rw]=Sheli
 Name[se]=Skálžu
 Name[sl]=Ukazna lupina
@@ -114,7 +115,7 @@
 Comment[pt]=Nova Linha de Comandos
 Comment[pt_BR]=Novo Shell
 Comment[ro]=Interpretor nou
-Comment[ru]=Новое окно Shell
+Comment[ru]=Новая консоль
 Comment[rw]=Sheli Nshya
 Comment[se]=Ođđa skálžu
 Comment[sk]=Nový shell
Index: konsole/other/linux.desktop
===================================================================
--- konsole/other/linux.desktop	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ konsole/other/linux.desktop	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -125,7 +125,7 @@
 Comment[pt]=Nova Consola de Linux
 Comment[pt_BR]=Novo Console do Linux
 Comment[ro]=Consolă Linux nouă
-Comment[ru]=Новая консоль
+Comment[ru]=Новая консоль Linux
 Comment[rw]=Konsole Linux Nshya
 Comment[se]=Ođđa Linux-konsolla
 Comment[sk]=Nová linuxová konzola
Index: ksysguard/ksysguardd/Linux/lmsensors.c
===================================================================
--- ksysguard/ksysguardd/Linux/lmsensors.c	(.../tags/KDE/3.5.9/kdebase)	(wersja 793728)
+++ ksysguard/ksysguardd/Linux/lmsensors.c	(.../branches/KDE/3.5/kdebase)	(wersja 793728)
@@ -29,7 +29,7 @@
 
 #include "lmsensors.h"
 
-#ifdef HAVE_LMSENSORS
+#ifdef HAVE_SENSORS_SENSORS_H
 #include <sensors/sensors.h>
 
 #ifndef SENSORS_API_VERSION
@@ -293,7 +293,7 @@
 #endif
 }
 
-#else /* HAVE_LMSENSORS */
+#else /* HAVE_SENSORS_SENSORS_H */
 
 /* dummy version for systems that have no lmsensors support */
 

Zmiany atrybutów dla: .
___________________________________________________________________
Nazwa: svn:mergeinfo
   - 
Nazwa: svn:externals
   + admin https://svn.kde.org/home/kde/branches/KDE/3.5/kde-common/admin


